<div class="container">
  <h1>Ajouter une photo</h1>
  <%= simple_form_for @issue do |f| %>
  <div id="photo-form">
    <label for="photo-upload">
      <span id="upload-btn" class="button button-icon"><i class="fas fa-camera"></i>Upload</span>
    </label>
    <%= f.input_field :photos, as: :attachinary, id: "photo-upload", input_html: { class: "button" }%>
  </div>
  <%= f.button :button, 'Next', class: "button button-add hidden", id: "next-form-btn" %>
  <div id="issue-form" class="hidden">
    <%= f.input :title %>
    <%= f.input :description %>
    <%= f.hidden_field :latitude %>
    <%= f.hidden_field :longitude %>
    <div class="hidden" id="hidden_address">
      <%= f.input :address %>
    </div>

    <%= f.button :button, 'Have a solution to add?', class: "button button-icon", id: "add-solution-btn" %>
  </div>
  <div id="solution-form" class="hidden">
    <%= f.input :solution %>
  </div>
  <%= f.submit class: "hidden button", id: "submit-btn" %>
  <% end %>
</div>

<script>
  navigator.geolocation.getCurrentPosition(function(location) {
    document.getElementById("issue_latitude").value = location.coords.latitude;
    document.getElementById("issue_longitude").value = location.coords.longitude;
  })

  const nextBtn = document.getElementById("next-form-btn");
  nextBtn.addEventListener("click", function() {
    if (document.getElementById("issue_longitude").value === "") {
      hidden_address.classList.remove("hidden");}
  })

</script>


